---
layout: post
title: TCP / IP协议族
abbrlink: a00be6c6fc9d4eff926f9d3974923b9c
tags:
  - 网络基础
categories:
  - Mac笔记本
  - 网络
date: 1716430361192
updated: 1746763123941
---

一系列协议组成的一个网络分层模型

## 4层模型

- 应用层:(具体协议内容 `HTTP , FTP , DNS`)
- 传输层:(`TCP / UDP`数据分块,聚合)
- 网络层(`IP`协议 发送数据)
- 数据链路层(以太网,wifi 介质)\
  ![bafac19ffdbdf1ef43f2414a13923fc6.png](/resources/a9f7c17c286641bc8af5995b8c8aa2ab.png)

## TCP连接

- 3次握手,4次挥手
- 长连接:心跳包

![TCP vs UDP.png](/resources/2d14e3d1e48b49f9af6500458ac4a1ae.png)\
![3cdfb550b14a00ec04d19c84daa164b9.png](/resources/3b09b8639c234463ae7972a3e95f1d77.png)

### 流量控制

> 防止发送方发送速度过快,导致接收方处理不及时

#### 滑动窗口机制

> 接收方传递信息给发送方，使其不要发送数据太快，是一种端到端的控制。主要的方式就是返回的ACK中会包含自己的接收窗口的大小，并且利用大小来控制发送方的数据发送

- 窗口：发送者发送的连续字节序列的集合
- 滑动：发送的窗口可以随发送过程而变化。

> 为什么需要窗口：不必每一个段进行一次确认应答，而是以一个窗口的大小进行确认。减少往返时间，提高速度。（TCP在发送时其实是以字节为单位的）

### 拥塞控制

> 防止过多数据注入导致网络拥塞

#### 拥塞窗口机制

##### 为什么有的流量控制，还需要拥塞控制？

> 流控只简单地表明了接收方的处理能力，并不能代表中间网络的处理能力\
> 如果一开始把流控窗口内的数据全部发送出去，中间路由器可能一时处理不了如此多的突发流量\
> 拥塞窗口（cwnd）和通告窗口（awnd）

- 慢开始( slow-start )
- 拥塞避免( congestion avoidance )
- 快重传( fast retransmit )
- 快恢复( fast recovery )。

### 对比

两者简单比较：

- 相同：提高网络性能。
- 不同：
  - \[1].流量控制：在TCP连接上实现对发送流量的控制，考虑点对点之间对通信量的控制，端到端，即：控制发送端的数据 发送速率，使接收端可以来得及接收，保证网络高效稳定运行。
  - \[2].拥塞控制：处理网络拥塞现象，考虑网络能够承受现有的网络负荷，全局性变量，涉及所有的路由器、主机以及与降 低网络传输性能有关的因素。防止过多的数据注入到网络，使网络中的路由器或链路不致过载，确保通信子网可以有 效为主机传递分组。

## tcp/udp

> tcp:面向连接,字节流传输,没有边界

> udp:面向报文,每一包都有边界

| 特性   | TCP（面向字节流）          | UDP（面向报文）               |
| ---- | ------------------- | ----------------------- |
| 数据边界 | 不保留                 | 保留                      |
| 发送方式 | 可能会拆分或合并数据块         | 一个数据块对应一个报文             |
| 接收方式 | 可能需要多次读取才能获取完整消息    | 一次读取一个完整报文              |
| 应用场景 | 文件传输、网页浏览等需要可靠传输的场景 | 视频流、游戏、DNS查询等对实时性要求高的场景 |
| 可靠性  | 高（有确认、重传机制）         | 低（无确认、重传机制）             |
