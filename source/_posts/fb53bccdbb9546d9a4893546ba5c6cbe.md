---
layout: post
title: winscope 使用
abbrlink: fb53bccdbb9546d9a4893546ba5c6cbe
tags:
  - framework
categories:
  - framework
  - window
date: 1757066865686
updated: 1757173153993
---

> 高版本可以抓低版本

- android-11.0.0\_r36 版本自带的

> `development/tools/winscope`\
> \- `yarn install`\
> \- `yarn run dev`\
> ![3606dd5e7ab52a75090395108fffa9b7.png](/resources/3a203dbf190243f49196291deefd9f6b.png)

- **可以直接使用下面这个版本(不需要重新编译新版本)**\
  `curl -sSL 'https://android.googlesource.com/platform/prebuilts/misc/+/refs/tags/android-platform-14.0.0_r22/common/winscope/winscope.html?format=TEXT' | base64 -d > winscope.html`
- **后续版本同样需要搭建aosp 编译才行**

## 抓取步骤

- 抓取 `adb shell su root service call SurfaceFlinger 1025 i32 1`
- 停止 `adb shell su root service call SurfaceFlinger 1025 i32 0`
- `adb root`
- 拉取 `adb pull /data/misc/wmtrace/layers_trace.pb ~/wmtrace/layers_trace.pb`

![f9fd692f85b4a00fa456fadc754ba18f.png](/resources/606a57b3fab84b33991e6d809b303023.png)
